<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Word Volcano – Wordlists</title>
  <style>


    
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; }
body {
  font-family:  "Open Sans", sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;      /* horizontal centering */
  justify-content: flex-start; /* move content to top */
  background: #000000;
  
  color: var(--text);
  text-align: center;
    padding-top: 40px; /* adjust as needed */

        a{display:block;padding:10px 0;text-decoration:none;border-bottom:1px solid #ddd;color:#FFFFFF;}

	
		a:link {
		  color: #0099ff;
		}

		a:visited {
		  color: #0099ff;
		}

		a:hover {
		  color: #ffa600;
		}

		a:active {
		  color: #ffa600;
		}
}

    		#flashtitle{
		-webkit-animation:colorchange 2s infinite alternate;
		-webkit-text-stroke-width: 0.0px;
		-webkit-text-stroke-color: white;
      
      
    }
    @-webkit-keyframes colorchange {
      0% {
        color: #f2bd0d;
      }   
      50% {     
        color: #f2830d;
      }   
      100% {
        color: #c0301a;
      }

    }
    
  #lava {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 128px;  /* Use vh to make height proportional to the viewport */
  background: url('images/purplelava1.gif') center center repeat; /* Set lava image as background */
  // background-size: cover; /* Ensure the image covers the entire area */
  z-index: -1; /* Ensure the lava is behind the other elements */
}
.wrap {
  width: min(920px, 90vw);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start; /* instead of center */
  gap: 10px;
	  background:#000000;
}

  </style>
</head>
<body>
    <div id="splashScreen">
		<h1 id="flashtitle">Word Volcano Collection #1</h1>
    </div>
  <div id="list">Loading…</div>

<script>
const owner = "wedg3";
const repo  = "wordvolcano";
const branch = "main";            // change to "master" if needed
const folder = "wordlists";
const basePage = "game.html";

const titleRegex = /const\s+wordlisttitle\s*=\s*["'`](.*?)["'`]\s*;?/i;

async function getTitleFromRaw(rawUrl, fallbackName){
  try{
    const r = await fetch(rawUrl);
    if(!r.ok) return fallbackName;
    const txt = await r.text();
    const m = txt.match(titleRegex);
    return (m && m[1] && m[1].trim()) ? m[1].trim() : fallbackName;
  }catch{
    return fallbackName;
  }
}

async function load(){
  const api = `https://api.github.com/repos/${owner}/${repo}/contents/${folder}?ref=${branch}`;
  const res = await fetch(api, { headers: { "Accept": "application/vnd.github+json" }});
  if(!res.ok){
    document.getElementById("list").textContent =
      `Could not load lists (${res.status}). Check repo/branch/folder.`;
    return;
  }
  const items = await res.json();

  const files = items
    .filter(x => x.type === "file")
    .filter(x => /\.(js|json|txt)$/i.test(x.name))
    .sort((a,b) => a.name.localeCompare(b.name, "en"));

  // Fetch titles (limit concurrency a bit so it doesn't spam requests)
  const results = [];
  const concurrency = 6;
  for(let i=0; i<files.length; i+=concurrency){
    const chunk = files.slice(i, i+concurrency);
    const chunkResults = await Promise.all(chunk.map(async f => {
      const fallback = f.name.replace(/\.(js|json|txt)$/i, "").replace(/[_-]+/g," ").trim();
      const title = await getTitleFromRaw(f.download_url, fallback);
      return { name: f.name, title };
    }));
    results.push(...chunkResults);
  }
  
  results.sort((a, b) =>
  a.title.localeCompare(b.title, "en", { sensitivity: "base" })
);
  

const html = results.map(({name, title}) => {
  const url = `${basePage}?wordlist=${encodeURIComponent(name)}`;
  return `<a href="${url}"><b>${title}</b></a>`;
}).join("");

  document.getElementById("list").innerHTML = html || "<p>No wordlists found.</p>";
}

load();
</script>

    <div id="lava"></div>
</body>
</html>
